var VISITS_TEXT = "Un dia entre cavalls lliures";
var VISITS_COLOR = "#378006";

var CONNECT_TO_THE_LIFE_TEXT = "Connecta't a la vida";
var CONNECT_TO_THE_LIFE_COLOR = '#ea7900';

var HOLIDAYS_IN_THE_FOUNDATION_TEXT = "Vacances entre cavalls lliures";
var HOLIDAYS_IN_THE_FOUNDATION_COLOR = '#1ab7d2';

var SUMMER_CAMP_TEXT = "Campaments d'estiu";
var SUMMER_CAMP_COLOR = '#d8d305';

var WORK_CAMP_TEXT = "Camps de treball";
var WORK_CAMP_COLOR = "#86830a";

var NIGHT_TEXT = "Nit entre cavalls"
var NIGHT_COLOR = "#3a4373"

var PRZEWALSKI_TEXT = "Projecte Przewalski"
var PRZEWALSKI_COLOR = "#dec74c"

var ANGELS_TEXT = "Comunicació Natural"
var ANGELS_COLOR = "#dec74c"

var TRANSHUMANCE_TEXT = "Transhumància"
var TRANSHUMANCE_COLOR = "#dec74c"

var TYPES = [
	"VISITS",
	"CONNECT_TO_THE_LIFE",
	"HOLIDAYS_IN_THE_FOUNDATION",
	"SUMMER_CAMP",
	"WORK_CAMP",
	"NIGHT",
	"PRZEWALSKI",
	"TRANSHUMANCE",
	"ANGELS"
]

var TRANSHUMANCE = [
	{
	  start: '2017-11-22',
	  end: '2017-11-28',
	  url: "https://www.eventbrite.com/e/entradas-transhumancia-tardor-2017-37295096638",
	}
]

var PRZEWALSKI = [
	{
	  start: '2017-09-08',
	  end: '2017-09-10',
	  url: "https://www.eventbrite.com/e/presentacio-projecte-przewalski-tickets-37078724463",
	}
]

var ANGELS = [
	{
	  start: '2017-09-24',
	  url: "https://www.eventbrite.com/e/entradas-jornada-de-comunicacio-natural-amb-cavalls-37365661700",
	}
]

var NIGHT = [
	{
	  start: '2017-08-04',
	  end: '2017-08-06',
	  url: "https://www.eventbrite.com/e/nit-entre-cavalls-lliures-tickets-36260083887",
	},
	{
	  start: '2017-08-05',
	  end: '2017-08-07',
	  url: "https://www.eventbrite.com/e/nit-entre-cavalls-lliures-tickets-36260084890",
	},

	{
	  start: '2017-08-18',
	  end: '2017-08-20',
	  url: "https://www.eventbrite.com/e/nit-entre-cavalls-lliures-tickets-36260085893",
	},
	{
	  start: '2017-08-19',
	  end: '2017-08-21',
	  url: "https://www.eventbrite.com/e/nit-entre-cavalls-lliures-tickets-36260086896",
	},

	{
	  start: '2017-09-01',
	  end: '2017-09-03',
	  url: "https://www.eventbrite.com/e/nit-entre-cavalls-lliures-tickets-36260087899",
	},
	{
	  start: '2017-09-02',
	  end: '2017-09-04',
	  url: "https://www.eventbrite.com/e/nit-entre-cavalls-lliures-tickets-36260088902",
	},

	{
	  start: '2017-09-22',
	  end: '2017-09-24',
	  url: "https://www.eventbrite.com/e/nit-entre-cavalls-lliures-tickets-37295927122",
	},
	{
	  start: '2017-09-23',
	  end: '2017-09-25',
	  url: "https://www.eventbrite.com/e/nit-entre-cavalls-lliures-tickets-37295928125",
	},


	{
	  start: '2017-10-20',
	  end: '2017-10-22',
	  url: "https://www.eventbrite.com/e/entradas-nit-entre-cavalls-lliures-37803372906",
	},
	{
	  start: '2017-10-21',
	  end: '2017-10-23',
	  url: "https://www.eventbrite.com/e/entradas-nit-entre-cavalls-lliures-37803373909",
	},
	
]

var VISITS = [ 
	{
	  start  : '2017-08-05',
	  url: "https://www.eventbrite.com/e/un-dia-entre-cavalls-lliures-tickets-35653965972",
	},
	{
	  start  : '2017-08-19',
	  url: "https://www.eventbrite.com/e/un-dia-entre-cavalls-lliures-tickets-35653966975",
	},
	{
	  start  : '2017-09-02',
	  url: "https://www.eventbrite.com/e/entradas-un-dia-entre-cavalls-lliures-fundacio-miranda-36599875212",
	},
	{
	  start  : '2017-09-23',
	  url: "https://www.eventbrite.com/e/entradas-un-dia-entre-cavalls-lliures-fundacio-miranda-36599876215"
	},
	{
	  start  : '2017-10-21',
	  url: "https://www.eventbrite.com/e/entradas-un-dia-entre-cavalls-lliures-fundacio-miranda-37803347831"
	}
];

var CONNECT_TO_THE_LIFE = [
	{
	  start: '2017-08-25',
	  end: '2017-08-28',
	  url: "https://www.eventbrite.com/e/connectat-a-la-vida-tickets-35647822597",
	},

	{
	  start: '2017-10-06',
	  end: '2017-10-09',
	  url: "https://www.eventbrite.com/e/retir-de-natura-i-salut-entre-cavalls-lliures-tickets-37803190360",
	}

	
];

var SUMMER_CAMP = [
	{
	  start: '2017-06-25',
	  end: '2017-07-02',
	  url: "https://www.eventbrite.com/e/campaments-destiu-tickets-32205656987",
	},
	{
	  start: '2017-07-02',
	  end: '2017-07-09',
	  url: "https://www.eventbrite.com/e/campaments-destiu-tickets-32205657990",
	},
	{
	  start: '2017-07-09',
	  end: '2017-07-16',
	  url: "https://www.eventbrite.com/e/campaments-destiu-tickets-32205658993",
	}
];

var WORK_CAMP = [	
	{
	  start: '2017-07-16',
	  end: '2017-07-23',
	  url: "https://www.eventbrite.com/e/entradas-camp-de-vida-12-17-anys-32311224743",
	},
	{
	  start: '2017-07-23',
	  end: '2017-07-30',
	  url: "https://www.eventbrite.com/e/entradas-camp-de-vida-12-17-anys-32311225746",
	}
];

var HOLIDAYS_IN_THE_FOUNDATION = [
	{
	  start: '2017-08-04',
	  end: '2017-08-07',
	  url: "https://www.eventbrite.com/e/vacances-entre-cavalls-lliures-tickets-35774225672",
	},
]

var EVENTS = [];
class Calendar {
	constructor(id) {
		this.id = ko.observable(id);
		this.calendarId = ko.computed(() => {
			return "calendar-" + this.id();
		});
		this.rendered = ko.observable(false);
	}

	getTextFromName(name) {
		return name + "_TEXT"
	}

	getColorFromName(name) {
		return name + "_COLOR"
	}

	createEventsList () {
		EVENTS = [];
		for (var j = 0; j < TYPES.length; j++) {
			for (var i = 0; i < window[TYPES[j]].length; i++) {
				window[TYPES[j]][i].title = window[this.getTextFromName(TYPES[j])];
				window[TYPES[j]][i].color = window[this.getColorFromName(TYPES[j])];
				EVENTS.push(window[TYPES[j]][i]);
			}
		}
	}

	render () {
		this.createEventsList();

		$('#' + this.calendarId()).fullCalendar({
			firstDay: 1,
			height: "parent",
			locale: PM.locale(),
			fixedWeekCount: false,
		  events: EVENTS
    });
	}

	defaultDate(date) {
		$('#' + this.calendarId()).fullCalendar("gotoDate", date);
	}

	show() {
		setTimeout(() => {
			if ($('#' + this.calendarId())[0]) {
				this.render();
				this.rendered(true);
			} else {
				this.show();
			}
		}, 500)
	}
}